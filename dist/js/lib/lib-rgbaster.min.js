!function(n,t){"use strict";var e=function(n,t){var e=document.createElement("canvas");return e.setAttribute("width",n),e.setAttribute("height",t),e.getContext("2d")},r=function(n,t){var r=new Image,i=n.src||n;"data:"!==i.substring(0,5)&&(r.crossOrigin="Anonymous"),r.onload=function(){var n=e(r.width,r.height);n.drawImage(r,0,0);var i=n.getImageData(0,0,r.width,r.height);t&&t(i.data)},r.src=i},i=function(n){return["rgb(",n,")"].join("")},a=function(n){var t=[];for(var e in n)t.push(u(e,n[e]));return t.sort(function(n,t){return t.count-n.count}),t},o=function(n,t){if(n.length>t)return n.slice(0,t);for(var e=n.length-1;t-1>e;e++)n.push(u("0,0,0",0));return n},u=function(n,t){return{name:i(n),count:t}},c={};c.colors=function(n,t){var e=(t=t||{}).exclude||[],u=t.paletteSize||10;r(n,function(n){for(var r={},c="",s=[],f=0;f<n.length;f+=4)s[0]=n[f],s[1]=n[f+1],s[2]=n[f+2],c=s.join(","),-1===s.indexOf(void 0)&&0!==n[f+3]&&-1===e.indexOf(i(c))&&(r[c]=c in r?r[c]+1:1);if(t.success){var d=o(a(r),u+1);t.success({dominant:d[0].name,secondary:d[1].name,palette:d.map(function(n){return n.name}).slice(1)})}})},n.RGBaster=n.RGBaster||c}(window);